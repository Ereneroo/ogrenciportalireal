<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Education Portal</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --text-light: #7f8c8d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            padding: 2rem;
            background: linear-gradient(135deg, #f5f7fa 0%, #dfe6f0 100%);
        }
        
        .login-box {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 400px;
            padding: 2.5rem;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .login-box:hover {
            transform: translateY(-25px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        
        .login-box h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-weight: 500;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }
        
        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .error-message {
            color: #e74c3c;
            margin-top: 1rem;
            display: none;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .portal {
            display: none;
            width: 100%;
        }
        
        nav {
            background-color: var(--secondary-color);
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        nav ul {
            list-style-type: none;
            display: flex;
            flex-wrap: wrap;
        }
        
        nav ul li {
            padding: 1.2rem 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.95rem;
            position: relative;
        }
        
        nav ul li:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .active-tab {
            background-color: rgba(255,255,255,0.1);
        }
        
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--accent-color);
        }
        
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 2rem 1.5rem;
        }
        
        .section {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
            font-size: 0.9rem;
        }
        
        /* Map Section Styles */
        .map-section {
            display: none;
            height: calc(100vh - 120px);
        }
        
        #map-container {
            display: flex;
            height: 100%;
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        #italyMap {
            flex: 2;
            height: 100%;
            z-index: 1;
        }
        
        .map-sidebar {
            flex: 1;
            background: white;
            padding: 1.5rem;
            overflow-y: auto;
            border-left: 1px solid #eee;
        }
        
        .map-title {
            background-color: var(--primary-color);
            color: white;
            padding: 1.2rem;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        /* Region Info Styles */
        .region-info {
            margin-bottom: 2rem;
        }
        
        .region-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .region-flag {
            width: 70px;
            height: 45px;
            object-fit: cover;
            border: 1px solid #eee;
            margin-right: 1.2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .region-title {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .region-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-item {
            background-color: #f8fafc;
            padding: 1rem;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .university-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .university-item {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }
        
        .university-item:hover {
            background-color: #f8fafc;
        }
        
        .university-name {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .university-location {
            color: var(--text-light);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .university-location svg {
            margin-right: 0.5rem;
            color: var(--accent-color);
        }
        
        .university-type {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background-color: #e6f2ff;
            color: #0066cc;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .no-universities {
            color: var(--text-light);
            font-style: italic;
            text-align: center;
            padding: 2rem;
        }
        
        /* Region Label Styles */
        .region-label {
            position: absolute;
            background-color: rgba(255,255,255,0.85);
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary-color);
            pointer-events: none;
            z-index: 1000;
            transform: translate(-50%, -50%);
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        @media (max-width: 992px) {
            #map-container {
                flex-direction: column;
            }
            
            #italyMap {
                height: 400px;
            }
            
            .map-sidebar {
                overflow-y: visible;
            }
        }
        
        @media (max-width: 768px) {
            .login-box {
                padding: 2rem 1.5rem;
            }
            
            nav ul li {
                padding: 1rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .main-content {
                padding: 1.5rem 1rem;
            }
            
            .region-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .region-flag {
                margin-bottom: 1rem;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Education Portal</h1>
        </header>

        <div class="login-container" id="loginSection">
            <div class="login-box">
                <h2>Login to Your Account</h2>
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <button class="btn" onclick="login()">Login</button>
                <p id="loginError" class="error-message">Invalid username or password!</p>
            </div>
        </div>

        <div class="portal" id="portal">
            <nav>
                <div class="nav-container">
                    <ul>
                        <li class="active-tab" onclick="showSection('dashboard')">Dashboard</li>
                        <li onclick="showSection('lessons')">Lessons</li>
                        <li onclick="showMapSection()">Italian Universities</li>
                        <li onclick="showSection('about')">About Us</li>
                        <li onclick="logout()" style="margin-left: auto;">Logout</li>
                    </ul>
                </div>
            </nav>

            <div class="main-content">
                <div class="section active" id="dashboard">
                    <h2>Dashboard</h2>
                    <p>Welcome to your education portal. Here you can access all your learning materials.</p>
                    
                    <h3>Your Upcoming Lessons</h3>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Subject</th>
                            <th>Teacher</th>
                        </tr>
                        <tr>
                            <td>2023-11-10</td>
                            <td>10:00 - 12:00</td>
                            <td>Mathematics</td>
                            <td>Mr. Smith</td>
                        </tr>
                        <tr>
                            <td>2023-11-12</td>
                            <td>09:00 - 11:00</td>
                            <td>Science</td>
                            <td>Ms. Johnson</td>
                        </tr>
                        <tr>
                            <td>2023-11-15</td>
                            <td>14:00 - 16:00</td>
                            <td>History</td>
                            <td>Mr. Brown</td>
                        </tr>
                    </table>
                </div>

                <div class="section" id="lessons">
                    <h2>Lessons</h2>
                    <p>Access your learning materials here.</p>
                    
                    <div style="margin-top: 2rem;">
                        <h3>Mathematics</h3>
                        <ul>
                            <li><a href="#">Algebra Basics</a></li>
                            <li><a href="#">Geometry Concepts</a></li>
                            <li><a href="#">Calculus Introduction</a></li>
                        </ul>
                        
                        <h3>Science</h3>
                        <ul>
                            <li><a href="#">Physics Fundamentals</a></li>
                            <li><a href="#">Chemistry Basics</a></li>
                            <li><a href="#">Biology Essentials</a></li>
                        </ul>
                    </div>
                </div>

                <div class="section" id="about">
                    <h2>About Us</h2>
                    <p>We are committed to providing quality education to all our students.</p>
                    
                    <h3>Our Mission</h3>
                    <p>To empower students through knowledge and critical thinking skills.</p>
                </div>

                <div class="map-section" id="mapSection">
                    <h2 class="map-title">Italian Universities Map - 2024</h2>
                    <div id="map-container">
                        <div id="italyMap"></div>
                        <div class="map-sidebar">
                            <div class="region-info">
                                <div class="region-header">
                                    <img class="region-flag" id="regionFlag" src="" alt="Region Flag">
                                    <h2 class="region-title" id="regionName">Select a region</h2>
                                </div>
                                <div class="region-stats" id="regionStats">
                                    <div class="stat-item">
                                        <div class="stat-label">Population</div>
                                        <div class="stat-value" id="population">-</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Area</div>
                                        <div class="stat-value" id="area">-</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Capital</div>
                                        <div class="stat-value" id="capital">-</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">Universities</div>
                                        <div class="stat-value" id="universityCount">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <h3 class="region-title">Universities</h3>
                            <ul class="university-list" id="universityList">
                                <li class="no-universities">Select a region on the map to see its universities</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>© 2023 Education Portal. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Predefined credentials
        const validCredentials = [
            { username: "teacher", password: "teacher123", role: "teacher" },
            { username: "student1", password: "student123", role: "student" },
            { username: "student2", password: "student123", role: "student" }
        ];

        // Map and region data
        let map;
        const regionData = {
            piedmont: {
                name: "Piedmont",
                population: "4.4 million",
                area: "25,402 km²",
                capital: "Turin",
                flag: "https://upload.wikimedia.org/wikipedia/commons/9/9b/Flag_of_Piedmont.svg",
                coordinates: [45.15, 7.85],
                universities: [
                    { name: "University of Turin", location: "Turin", type: "Public" },
                    { name: "Polytechnic University of Turin", location: "Turin", type: "Public" },
                    { name: "University of Eastern Piedmont", location: "Alessandria, Novara, Vercelli", type: "Public" }
                ]
            },
            aosta: {
                name: "Aosta Valley",
                population: "128,000",
                area: "3,263 km²",
                capital: "Aosta",
                flag: "https://upload.wikimedia.org/wikipedia/commons/9/91/Flag_of_the_Valle_d%27Aosta_Region.svg",
                coordinates: [45.737, 7.313],
                universities: [
                    { name: "University of Valle d'Aosta", location: "Aosta", type: "Public" }
                ]
            },
            lombardy: {
                name: "Lombardy",
                population: "10 million",
                area: "23,844 km²",
                capital: "Milan",
                flag: "https://upload.wikimedia.org/wikipedia/commons/a/a2/Flag_of_Lombardy.svg",
                coordinates: [45.585, 9.93],
                universities: [
                    { name: "University of Milan", location: "Milan", type: "Public" },
                    { name: "Polytechnic University of Milan", location: "Milan", type: "Public" },
                    { name: "University of Milan-Bicocca", location: "Milan", type: "Public" },
                    { name: "University of Pavia", location: "Pavia", type: "Public" },
                    { name: "University of Bergamo", location: "Bergamo", type: "Public" },
                    { name: "University of Brescia", location: "Brescia", type: "Public" },
                    { name: "Catholic University of the Sacred Heart", location: "Milan", type: "Private" },
                    { name: "Bocconi University", location: "Milan", type: "Private" }
                ]
            },
            trentino: {
                name: "Trentino-Alto Adige",
                population: "1.1 million",
                area: "13,607 km²",
                capital: "Trento",
                flag: "https://upload.wikimedia.org/wikipedia/commons/a/a0/Flag_of_Trentino-Alto_Adige.svg",
                coordinates: [46.36, 11.33],
                universities: [
                    { name: "University of Trento", location: "Trento", type: "Public" },
                    { name: "Free University of Bozen-Bolzano", location: "Bolzano", type: "Public" }
                ]
            },
            veneto: {
                name: "Veneto",
                population: "4.9 million",
                area: "18,399 km²",
                capital: "Venice",
                flag: "https://upload.wikimedia.org/wikipedia/commons/1/19/Flag_of_Veneto.svg",
                coordinates: [45.44, 11.85],
                universities: [
                    { name: "University of Padua", location: "Padua", type: "Public" },
                    { name: "Ca' Foscari University of Venice", location: "Venice", type: "Public" },
                    { name: "University of Verona", location: "Verona", type: "Public" },
                    { name: "IUAV University of Venice", location: "Venice", type: "Public" },
                    { name: "University of Venice for Foreigners", location: "Venice", type: "Public" }
                ]
            },
            friuli: {
                name: "Friuli-Venezia Giulia",
                population: "1.2 million",
                area: "7,858 km²",
                capital: "Trieste",
                flag: "https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Friuli-Venezia_Giulia.svg",
                coordinates: [45.98, 13.38],
                universities: [
                    { name: "University of Trieste", location: "Trieste", type: "Public" },
                    { name: "University of Udine", location: "Udine", type: "Public" }
                ]
            },
            liguria: {
                name: "Liguria",
                population: "1.6 million",
                area: "5,422 km²",
                capital: "Genoa",
                flag: "https://upload.wikimedia.org/wikipedia/commons/a/a4/Flag_of_Liguria.svg",
                coordinates: [44.45, 8.77],
                universities: [
                    { name: "University of Genoa", location: "Genoa", type: "Public" }
                ]
            },
            emilia: {
                name: "Emilia-Romagna",
                population: "4.5 million",
                area: "22,446 km²",
                capital: "Bologna",
                flag: "https://upload.wikimedia.org/wikipedia/commons/3/30/Flag_of_Emilia-Romagna.svg",
                coordinates: [44.65, 10.92],
                universities: [
                    { name: "University of Bologna", location: "Bologna", type: "Public" },
                    { name: "University of Modena and Reggio Emilia", location: "Modena, Reggio Emilia", type: "Public" },
                    { name: "University of Parma", location: "Parma", type: "Public" },
                    { name: "University of Ferrara", location: "Ferrara", type: "Public" },
                    { name: "University of Forlì", location: "Forlì", type: "Public" }
                ]
            },
            tuscany: {
                name: "Tuscany",
                population: "3.7 million",
                area: "22,987 km²",
                capital: "Florence",
                flag: "https://upload.wikimedia.org/wikipedia/commons/0/0c/Flag_of_Tuscany.svg",
                coordinates: [43.77, 11.26],
                universities: [
                    { name: "University of Florence", location: "Florence", type: "Public" },
                    { name: "University of Pisa", location: "Pisa", type: "Public" },
                    { name: "University of Siena", location: "Siena", type: "Public" },
                    { name: "Sant'Anna School of Advanced Studies", location: "Pisa", type: "Public" },
                    { name: "Scuola Normale Superiore di Pisa", location: "Pisa", type: "Public" },
                    { name: "University for Foreigners of Siena", location: "Siena", type: "Public" }
                ]
            },
            umbria: {
                name: "Umbria",
                population: "882,000",
                area: "8,456 km²",
                capital: "Perugia",
                flag: "https://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Umbria.svg",
                coordinates: [43.11, 12.39],
                universities: [
                    { name: "University of Perugia", location: "Perugia", type: "Public" },
                    { name: "University for Foreigners of Perugia", location: "Perugia", type: "Public" }
                ]
            },
            marche: {
                name: "Marche",
                population: "1.5 million",
                area: "9,366 km²",
                capital: "Ancona",
                flag: "https://upload.wikimedia.org/wikipedia/commons/2/23/Flag_of_Marche.svg",
                coordinates: [43.62, 13.52],
                universities: [
                    { name: "Polytechnic University of Marche", location: "Ancona", type: "Public" },
                    { name: "University of Macerata", location: "Macerata", type: "Public" },
                    { name: "University of Camerino", location: "Camerino", type: "Public" },
                    { name: "University of Urbino", location: "Urbino", type: "Public" }
                ]
            },
            lazio: {
                name: "Lazio",
                population: "5.9 million",
                area: "17,236 km²",
                capital: "Rome",
                flag: "https://upload.wikimedia.org/wikipedia/commons/b/b5/Flag_of_Lazio.svg",
                coordinates: [41.89, 12.48],
                universities: [
                    { name: "Sapienza University of Rome", location: "Rome", type: "Public" },
                    { name: "University of Rome Tor Vergata", location: "Rome", type: "Public" },
                    { name: "Roma Tre University", location: "Rome", type: "Public" },
                    { name: "University of Tuscia", location: "Viterbo", type: "Public" },
                    { name: "LUISS University", location: "Rome", type: "Private" },
                    { name: "John Cabot University", location: "Rome", type: "Private" }
                ]
            },
            abruzzo: {
                name: "Abruzzo",
                population: "1.3 million",
                area: "10,763 km²",
                capital: "L'Aquila",
                flag: "https://upload.wikimedia.org/wikipedia/commons/1/18/Flag_of_Abruzzo.svg",
                coordinates: [42.35, 13.4],
                universities: [
                    { name: "University of L'Aquila", location: "L'Aquila", type: "Public" },
                    { name: "Gabriele d'Annunzio University", location: "Chieti, Pescara", type: "Public" },
                    { name: "University of Teramo", location: "Teramo", type: "Public" }
                ]
            },
            molise: {
                name: "Molise",
                population: "305,000",
                area: "4,438 km²",
                capital: "Campobasso",
                flag: "https://upload.wikimedia.org/wikipedia/commons/b/b8/Flag_of_Molise.svg",
                coordinates: [41.63, 14.61],
                universities: [
                    { name: "University of Molise", location: "Campobasso", type: "Public" }
                ]
            },
            campania: {
                name: "Campania",
                population: "5.8 million",
                area: "13,671 km²",
                capital: "Naples",
                flag: "https://upload.wikimedia.org/wikipedia/commons/a/a7/Flag_of_Campania.svg",
                coordinates: [40.84, 14.25],
                universities: [
                    { name: "University of Naples Federico II", location: "Naples", type: "Public" },
                    { name: "University of Campania Luigi Vanvitelli", location: "Caserta", type: "Public" },
                    { name: "University of Salerno", location: "Salerno", type: "Public" },
                    { name: "University of Sannio", location: "Benevento", type: "Public" },
                    { name: "Suor Orsola Benincasa University", location: "Naples", type: "Public" }
                ]
            },
            apulia: {
                name: "Apulia",
                population: "4.1 million",
                area: "19,358 km²",
                capital: "Bari",
                flag: "https://upload.wikimedia.org/wikipedia/commons/4/46/Flag_of_Apulia.svg",
                coordinates: [41.13, 16.87],
                universities: [
                    { name: "University of Bari", location: "Bari", type: "Public" },
                    { name: "Polytechnic University of Bari", location: "Bari", type: "Public" },
                    { name: "University of Foggia", location: "Foggia", type: "Public" },
                    { name: "University of Salento", location: "Lecce", type: "Public" }
                ]
            },
            basilicata: {
                name: "Basilicata",
                population: "562,000",
                area: "9,995 km²",
                capital: "Potenza",
                flag: "https://upload.wikimedia.org/wikipedia/commons/9/9c/Flag_of_Basilicata.svg",
                coordinates: [40.64, 15.81],
                universities: [
                    { name: "University of Basilicata", location: "Potenza, Matera", type: "Public" }
                ]
            },
            calabria: {
                name: "Calabria",
                population: "1.9 million",
                area: "15,081 km²",
                capital: "Catanzaro",
                flag: "https://upload.wikimedia.org/wikipedia/commons/1/16/Flag_of_Calabria.svg",
                coordinates: [38.91, 16.59],
                universities: [
                    { name: "University of Calabria", location: "Rende", type: "Public" },
                    { name: "Mediterranean University of Reggio Calabria", location: "Reggio Calabria", type: "Public" },
                    { name: "University Magna Græcia", location: "Catanzaro", type: "Public" }
                ]
            },
            sicily: {
                name: "Sicily",
                population: "5 million",
                area: "25,711 km²",
                capital: "Palermo",
                flag: "https://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Sicily.svg",
                coordinates: [37.6, 14.02],
                universities: [
                    { name: "University of Palermo", location: "Palermo", type: "Public" },
                    { name: "University of Catania", location: "Catania", type: "Public" },
                    { name: "University of Messina", location: "Messina", type: "Public" },
                    { name: "University of Enna", location: "Enna", type: "Public" },
                    { name: "Kore University of Enna", location: "Enna", type: "Private" }
                ]
            },
            sardinia: {
                name: "Sardinia",
                population: "1.6 million",
                area: "24,090 km²",
                capital: "Cagliari",
                flag: "https://upload.wikimedia.org/wikipedia/commons/3/35/Flag_of_Sardinia.svg",
                coordinates: [39.22, 9.11],
                universities: [
                    { name: "University of Cagliari", location: "Cagliari", type: "Public" },
                    { name: "University of Sassari", location: "Sassari", type: "Public" }
                ]
            }
        };

        // Login function
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorElement = document.getElementById('loginError');

            // Check credentials
            const user = validCredentials.find(
                cred => cred.username === username && cred.password === password
            );

            if (user) {
                // Successful login
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('portal').style.display = 'block';
                errorElement.style.display = 'none';
                
                // Show map section by default
                showMapSection();
            } else {
                // Failed login
                errorElement.style.display = 'block';
            }
        }

        function logout() {
            document.getElementById('portal').style.display = 'none';
            document.getElementById('loginSection').style.display = 'flex';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            // Reset to dashboard view
            showSection('dashboard');
            
            // Reset active tab
            const tabs = document.querySelectorAll('nav ul li');
            tabs.forEach(tab => tab.classList.remove('active-tab'));
            tabs[0].classList.add('active-tab');
        }

        function showSection(sectionId) {
            // Hide all sections and map section
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById('mapSection').style.display = 'none';
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active tab
            updateActiveTab(sectionId);
        }

        function showMapSection() {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show map section
            document.getElementById('mapSection').style.display = 'block';
            
            // Initialize map if not already done
            if (!map) {
                initItalianUniversitiesMap();
            }
            
            // Update active tab
            updateActiveTab('italianUniversities');
        }

        function updateActiveTab(sectionId) {
            const tabs = document.querySelectorAll('nav ul li');
            tabs.forEach(tab => tab.classList.remove('active-tab'));
            
            let tabIndex;
            switch(sectionId) {
                case 'dashboard': tabIndex = 0; break;
                case 'lessons': tabIndex = 1; break;
                case 'italianUniversities': tabIndex = 2; break;
                case 'about': tabIndex = 3; break;
            }
            
            if (tabIndex !== undefined) {
                tabs[tabIndex].classList.add('active-tab');
            }
        }

        function initItalianUniversitiesMap() {
            // Initialize the map
            map = L.map('italyMap').setView([41.8719, 12.5674], 6);
            
            // Add tile layer (OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Add region labels and click handlers
            Object.keys(regionData).forEach(regionId => {
                const region = regionData[regionId];
                
                // Create a label for each region
                const label = L.marker(region.coordinates, {
                    icon: L.divIcon({
                        className: 'region-label',
                        html: region.name,
                        iconSize: [100, 20]
                    }),
                    interactive: true,
                    regionId: regionId
                }).addTo(map);
                
                // Add click event to show region info
                label.on('click', function(e) {
                    displayRegionInfo(this.options.regionId);
                });
            });
            
            // Display first region info by default
            displayRegionInfo('lombardy');
            
            // Zoom to Lombardy by default
            map.setView(regionData['lombardy'].coordinates, 8);
        }

        function displayRegionInfo(regionId) {
            const regionInfo = regionData[regionId];
            
            if (regionInfo) {
                // Update region info
                document.getElementById('regionName').textContent = regionInfo.name;
                document.getElementById('regionFlag').src = regionInfo.flag;
                document.getElementById('regionFlag').alt = `${regionInfo.name} Flag`;
                document.getElementById('population').textContent = regionInfo.population;
                document.getElementById('area').textContent = regionInfo.area;
                document.getElementById('capital').textContent = regionInfo.capital;
                document.getElementById('universityCount').textContent = regionInfo.universities.length;
                
                // Update universities list
                displayUniversities(regionId);
                
                // Zoom to the region on the map
                map.setView(regionInfo.coordinates, 8);
            }
        }

        function displayUniversities(regionId) {
            const universities = regionData[regionId]?.universities || [];
            const universityList = document.getElementById('universityList');
            
            // Clear current list
            universityList.innerHTML = '';
            
            if (universities.length > 0) {
                universities.forEach(univ => {
                    const li = document.createElement('li');
                    li.className = 'university-item';
                    li.innerHTML = `
                        <div class="university-name">${univ.name}</div>
                        <div class="university-location">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                            </svg>
                            ${univ.location}
                        </div>
                        <span class="university-type">${univ.type}</span>
                    `;
                    universityList.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.className = 'no-universities';
                li.textContent = 'No universities found in this region';
                universityList.appendChild(li);
            }
        }
    </script>
</body>
</html>
